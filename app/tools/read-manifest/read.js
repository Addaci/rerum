var dummy = function(fn){
    var m ={
    "@context": "http://iiif.io/api/presentation/1/context.json",
    "@id": "http://t-pen.org/TPEN/project/4080",
    "@type": "sc:Manifest",
    "label": "Tradamus Simple:  ",
    "description": " ",
    "sequences": [{
        "@id": "http://t-pen.org/TPEN/project/4080/sequence/normal",
        "@type": "sc:Sequence",
        "label": "Current Page Order",
        "canvases": [{
            "@id": "http://t-pen.org/Tradamus+Simple/canvas/100r",
            "@type": "sc:Canvas",
            "label": "100r",
            "height": 1000,
            "width": 667,
            "images": [{
                "@id": "http://t-pen.org/Tradamus+Simple/image/100r",
                "@type": "oa:Annotation",
                "motivation": "sc:painting",
                "resource": {
                    "@id": "http://t-pen.org/TPEN/imageResize?folioNum=105420&height=1000&user=cubap@slu.edu",
                    "@type": "dctypes:Image",
                    "format": "image/jpeg",
                    "height": 2365,
                    "width": 1579
                },
                "on": "http://t-pen.org/Tradamus+Simple/canvas/100r"
            }],
            "otherContent": [{
                "@id": "http://t-pen.org/Tradamus+Simple/transcription/100r",
                "@type": "sc:AnnotationList",
                "resources": [{
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083800",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "ape nota trinitas al-<choice> choice tag </choice> gggdd</note>  dgd <note type=\"biblCite\" place=\"\" target=\"\">"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100r#xywh=148,26,409,105"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101599264",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "line test for testing a <div type=\"creed\" n=\"\" xml:id=\"\">tag"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100r#xywh=148,140,409,32"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101599263",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": ""
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100r#xywh=148,172,409,28"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101599262",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": ""
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100r#xywh=148,200,409,31"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101599261",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": ""
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100r#xywh=148,231,409,48"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101599260",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": ""
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100r#xywh=148,279,409,33"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101599259",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": ""
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100r#xywh=148,312,409,32"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101599258",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": ""
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100r#xywh=148,344,409,33"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083801",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100r#xywh=148,377,409,34"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083802",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "uia tibi gloria et laus en be d"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100r#xywh=148,411,409,29"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083803",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100r#xywh=148,440,409,29"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083839",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "trua Benedictus sitirus"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100r#xywh=148,469,409,30"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083804",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100r#xywh=148,499,409,31"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/note/101083804",
                    "@type": "oa:Annotation",
                    "motivation": "oa:commenting",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "scspocm"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/line/101083804"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/102083104",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": ""
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100r#xywh=148,530,409,84"
                }]
            }]
        }, {
            "@id": "http://t-pen.org/Tradamus+Simple/canvas/100v",
            "@type": "sc:Canvas",
            "label": "100v",
            "height": 1000,
            "width": 667,
            "images": [{
                "@id": "http://t-pen.org/Tradamus+Simple/image/100v",
                "@type": "oa:Annotation",
                "motivation": "sc:painting",
                "resource": {
                    "@id": "http://t-pen.org/TPEN/imageResize?folioNum=105421&height=1000&user=cubap@slu.edu",
                    "@type": "dctypes:Image",
                    "format": "image/jpeg",
                    "height": 2365,
                    "width": 1579
                },
                "on": "http://t-pen.org/Tradamus+Simple/canvas/100v"
            }],
            "otherContent": [{
                "@id": "http://t-pen.org/Tradamus+Simple/transcription/100v",
                "@type": "sc:AnnotationList",
                "resources": [{
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083814",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "<temp>Infesto Corporis Christi</temp>"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,61,401,45"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083877",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,106,401,27"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083816",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "midi alleluia Benediate all"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,133,401,30"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083817",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,163,401,37"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083878",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "celi et mia omnibus uiuentibus routite"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,200,401,26"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083818",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,226,401,42"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083879",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "uum e i qui a te at vobis tuum"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,268,401,23"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083880",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,291,401,26"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083822",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "le moridam tuam blah eos"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,317,401,27"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083823",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,344,401,44"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083881",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "<temp>silidun</temp> Alleulia"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,388,401,27"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083882",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,415,401,32"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083825",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "Lardo vica vere"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,447,401,29"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083883",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,476,401,27"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083884",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "est a bus et languis meus verr"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,503,401,23"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083827",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,526,401,37"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083885",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "est potus qui inaducat carue ine"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,563,401,25"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083828",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,588,401,39"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083886",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "am et bibitincum"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,627,401,27"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083887",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,654,401,30"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083830",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "languinem in me inauet et"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/100v#xywh=104,684,401,30"
                }]
            }]
        }, {
            "@id": "http://t-pen.org/Tradamus+Simple/canvas/101r",
            "@type": "sc:Canvas",
            "label": "101r",
            "height": 1000,
            "width": 667,
            "images": [{
                "@id": "http://t-pen.org/Tradamus+Simple/image/101r",
                "@type": "oa:Annotation",
                "motivation": "sc:painting",
                "resource": {
                    "@id": "http://t-pen.org/TPEN/imageResize?folioNum=105422&height=1000&user=cubap@slu.edu",
                    "@type": "dctypes:Image",
                    "format": "image/jpeg",
                    "height": 2365,
                    "width": 1579
                },
                "on": "http://t-pen.org/Tradamus+Simple/canvas/101r"
            }],
            "otherContent": [{
                "@id": "http://t-pen.org/Tradamus+Simple/transcription/101r",
                "@type": "sc:AnnotationList",
                "resources": [{
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083851",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "In festo Corpous Christi"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,27,410,46"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083924",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,73,410,35"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083925",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "ego in eo Sacerdotes in ceilium"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,108,410,28"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083927",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,136,410,33"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083926",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "domini et panes offerunt deo et"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,169,410,22"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083855",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,191,410,37"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083928",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "ideo lauiti erunt deo cuo et no-"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,228,410,23"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083858",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,251,410,36"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083929",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "polluent uome cuis alleluia"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,287,410,23"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083860",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,310,410,46"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083861",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "Quoae laique inaducabitis pauce huic"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,356,410,22"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083863",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,378,410,28"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083930",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "et calicem bibetis mo?te <temp>domini</temp> annuabi"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,406,410,29"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083865",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "<temp>tralalalal lalaal alala</temp>"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,435,410,36"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083866",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,471,410,23"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083867",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,494,410,34"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083931",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,528,410,29"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083868",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,557,410,39"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083870",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,596,410,23"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083871",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,619,410,40"
                }, {
                    "@id": "http://t-pen.org/Tradamus+Simple/line/101083872",
                    "@type": "oa:Annotation",
                    "motivation": "http://filteredpush.org/ontologies/oa/oad#transcribing",
                    "resource": {
                        "@type": "cnt:ContentAsText",
                        "cnt:chars": "tralalalal lalaal alala"
                    },
                    "on": "http://t-pen.org/Tradamus+Simple/canvas/101r#xywh=151,659,410,21"
                }]
            }]
        }]
    }]
};
fn(m);
return m;
};

/*
 * Read a manifest's transcription.
 * author: cubap@slu.edu
 */

rerum.config(['$routeProvider',
    function($routeProvider) {
        $routeProvider
            .when('/read', {
                templateUrl: 'app/tools/read-manifest/read.html',
                controller: 'readManifestController',
                resolve: {
                    context: function(Context) {
                        return Context.getJSON.success(function(c) {
                            // cached for later consumption
                        });
                    },
                    obj: function($location, $http,rerumService) {
                        // TODO: preload a known manifest from the URL or memory
                        var mUrl = $location.search().url;
                        var manifest = (mUrl && $http.get(mUrl).then(function(m) {
                            // success
                            rerumService.extractResources(m.data);
                            return m.data;
                        }, function(err) {
                            // error
                            return {
                                error: err
                            };
                        })) || dummy(rerumService.extractResources);
                        return manifest;
                    }
                }
            });
    }
]);

rerum.controller('readManifestController', function($scope, obj) {
    $scope.obj = obj;
    $scope.canvas = $scope.obj.sequences[0].canvases[0];
    $scope.screen = {
            viewing: "image",
            language: "en",
            backsplashStyle:"",
            views:{
            image:"text",
            text:"image"
        }
    };
    $scope.setDescription = function(desc, lang) {
        $scope.screen.language = lang;
        $scope.description = "";
        if (!desc) {
            return $scope.description;
        }
        if (angular.isArray(desc)) {
            $scope.languages = [];
            angular.forEach(desc, function(o, i) {
                $scope.languages.push(o['@language']);
                if (o['@language'] === lang) {
                    $scope.description = o['@value'];
                }
            });
            return $scope.description;
        }
        if (typeof $scope.description === "string") {
            return $scope.description;
        }
        return $scope.description;
    };
    $scope.setDescription(obj.description, "en");
    $scope.getStyle = function(on) {
        var xywh = on.substring(on.indexOf("xywh=") + 5).split(",");
        var height = $scope.canvas.height;
        var width = $scope.canvas.width;
        return {
            left: xywh[0] / width * 100 + "%",
            top: xywh[1] / height * 100 + "%",
            height: xywh[3] / height * 100 + "%",
            width: xywh[2] / width * 100 + "%"
        };
    };
    $scope.moveBacksplash = function(on) {
        var xywh = on.substring(on.indexOf("xywh=") + 5).split(",");
        var height = $scope.canvas.height;
        var width = $scope.canvas.width;
        var ww = window.innerWidth;
        var iw = ww * width / xywh[2]; // in pixels
        var ih = iw * height / width;
        var ratio = iw / width;
        $scope.screen.backsplashStyle = {
            left: -xywh[0] * ratio + "px",
            top: -xywh[1] * ratio + "px",
            width: iw + "px",
            opacity: .6
        };
    };
    $scope.hideBacksplash = function(){
        $scope.screen.backsplashStyle = null;
    };
    $scope.cycleView = function(){
        $scope.screen.viewing = $scope.screen.views[$scope.screen.viewing];
    };
});